# Charts repository
%if "%_repository" == "charts"
Type: helm
Repotype: none
Patterntype: none
Required: perl-YAML-LibYAML
%endif

%if "%_repository" == "containerkiwi"
Type: kiwi
Repotype: slepool:nobuildid
Patterntype: none
%endif

# Container images are build in 'containers' repository
# ISO images are build in 'containers' repository too
%if %_repository == "containers"
Required: elemental-post-build-extract-iso
Repotype: staticlinks

Type: docker
BuildEngine: podman

Prefer: SL-Micro-release

Prefer: registries-conf-suse

# This is to prevent pulling the base containers from SUSE:Registry
# otherwise the devel project does not build derived images against
# the latest base images from the current project
Prefer: -container:suse-sl-micro-6.2-baremetal-os-container-latest
Prefer: -container:suse-sl-micro-6.2-base-os-container-latest
Prefer: -container:suse-sl-micro-6.2-rt-os-container-latest
Prefer: -container:suse-sl-micro-6.2-kvm-os-container-latest
%endif

%if %_repository == "containers" || "%_repository" == "charts"
Macros:
%img_repo %(echo registry.opensuse.org:%{_project}:containers | tr ":" "/" | tr '[:upper:]' '[:lower:]')
%slmicro_version 6.2
:Macros

BuildFlags: dockerarg:SLMICRO_VERSION=6.2
BuildFlags: dockerarg:SL_VERSION=16.0
%endif
